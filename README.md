GetManifests
============

EDI (API) Documentation for the Standard, XML-Based, Vendor Shipment Data Transfer

Overview
--------

Manna Freight Systems, Inc. can be configured to generate specially-formatted XML documents which contain shipment information for our suppliers. This information can be transferred to an HTTP endpoint or put into a file which can be transferred via FTP-- either uploaded to an FTP server hosted by the supplier or made available for download on an FTP server hosted by us.

We recommend beginning the integration by creating a system to receive our transmissions and then requesting that we enable them. You would start to collect real-world examples for your development and testing. Make your request by emailing Support@MFSCorporate.com.

Transmission
------------

The transmissions are generated by our system based on various triggers. Each transmission contains the complete shipment information as of the time of generation. The system does not filter out transmissions which would be practically identical to previous transmissions. The triggering mechanism also does not ensure that a change actually took place-- rather, it triggers based on an activity which might result in a change of shipment information. Also, the system does not, by default, stop transmissions for a particular shipment based on its life cycle. It will continue to send transmissions for a shipment whenever relevant activity occurs, even if the shipment has long since been completed.

When the data is transferred via HTTP, the XML itself will appear in the body of an HTTP POST request. It will not be like a normal web form POST from a browser, which would have name-value pairs with a media type of `application/x-www-form-urlencoded`. Rather, it will be raw XML, with an effective media type of `application/xml`.

When the data is transferred via HTTP, our system can be configured to expect an HTTP response with specially-formatted XML content which describes whether your interpretation of our transmission was successful. This allows our system to inform our operations staff if there is a problem with you receiving the information. 

Business Concepts
-----------------

When our customers request that we move product (see also [SendUsShipments](/SendUsShipments)), we create a new shipment in our system. (That shipment is also called a Bill of Lading.) We then aggregate these shipments into groups which are appropriate for a single engagement with a supplier. We call that grouping a manifest. From a contractual or legal perspective, we relate to our suppliers at that aggregate level. We expect to be charged in aggregate, and we expect that the entire group move together and be treated as a single set of pieces. In effect, officially, it is not a group at all but simply a larger "shipment".

That said, the operational reality is that it is still a group, and it's valuable for our suppliers to understand the nature of the group-- to have information about the shipments inside the manifest. Toward that end, our XML format includes both aggregate, manifest-level information and information about each shipment within the manifest. The most important piece of shipment-level information is the shipment identifier (ID). It is also known as the tracking number or BOL number. It's generally the number our customers use to refer to the shipment, and it's the number generally used by suppliers when interacting with shippers and consignees.

Transmission Content
--------------------

The root XML element is `ManifestTransmission`; it contains header information and the manifest information itself. Each transmission will contain information about *only one* manifest.

### Header Information

The header elements are grouped into a header element, but rather hang off the root. They consist of:

* `TransmissionID` - A unique integer for the current transmission. Multiple transmissions of the same manifest information would each have a different transmission ID. The value is unique across all of our transmissions, not just transmissions for a particular supplier. This value is useful for debugging transmission problems.
* `TransmissionGeneratedUTC` and `TransmissionGeneratedLocal` - The date the transmission was generated in UTC and our time (US Central time zone, where daylight savings is observed).
* `Authentication` - This section can be populated with a `UserName` and `Password` of your choosing. This could be used by you to authenticate our transmission. Instead of a password, a `PasswordHash` can be sent, which is a dynamically salted MD5 or SHA1 hash of this constructed value:
	> `UserName` + `|` + `TransmissionID` + `|` + `TransmissionGeneratedUTC` + `|` + `Password`

### Manifest Information

The manifest information is hangs off the root inside of `Manifest` and is broken into various sections:

* `ManifestInfo`
* `ManifestControlNumbers`
* `ManifestKeyDates`
* `ManifestOrigin`
* `ManifestDestination`
* `ManifestPieceSummary`
* `Shipments`

#### ManifestInfo

* `ManifestVendorID` - This is our primary, unique textual identifier for the company responsible for the manifest. The identifier is only unique for a particular Vendor Type.
* `ManifestVendorType` - We generally categorize our suppliers as either a "Carrier" or "Agent". A MAWB must have a "Carrier" as the responsible company. Carriers are generally used to move freight from one market to another (often called a "line haul"). An "Agent" typically operates within a market and is the responsible entity on Pickup Manifests, Delivery Manifests, and most Transfer Manifests (though a Carrier can be the responsible company on a Transfer Manifest).
* `ManifestType` - The primary Manifest Types are "Pickup", "Delivery", "MAWB", and "Transfer".
	 * A Pickup Manifest involves our supplier retrieving products from our customer's designated shipping location and then transferring that product to another supplier, typically the Carrier on one or more MAWBs. Usually, all of the shipments on the Pickup Manifest will belong to the same customer of ours, though it is possible that a variety of our customers might have shipments originating at the same distribution center or "drop shipper". While a Pickup manifest should always have a single origin location, various groups of the underlying shipments might have different Carriers for their next manifest. Therefore, the Pickup Manifest supplier (a.k.a. "Pickup Agent") might need to drop groups of the products at multiple Carriers. Unfortunately, this XML EDI system does not provide detail beyond the first drop location at this time.
	 * A MAWB can be thought of as a Line-Haul Manifest. The term MAWB stands for Master Air WayBill which is how the air freight industry typically refers to shipments of cargo on air carriers. Typically, Carriers receive shipments at their terminals (which is usually at or near an airport and therefore represented by 3-character IATA airport codes such as MSP) and hold them for pickup at the destination terminal. Some carriers perform more complete service, retrieving product from or delivering product to a location. Whether the carrier is bound to their terminals or travel to an address to pickup or drop off the orders varies by MAWB and is indicated in the `ManifestOrigin\ManifestOriginType` and `ManifestDestination\ManifestDestType` elements.
	 * A Delivery Manifest typically involves our supplier retrieving products from a carrier terminal and dropping products off at our customer's designated destination location; that destination location is known as the BOL Consignee. The vast majority of Delivery Manifests are of a single shipment; they are often destined for a residence. However, some are "returns", that is, a collection of shipments of damaged or broken products being "returned" to our customer's warehouse. In those cases, multiple shipments will be combined onto the same Delivery Manifest, and often they will need to be retrieved from multiple carriers. Unfortunately, this XML EDI system does not provide detail beyond the first retrieval location at this time.
	 * A Transfer Manifest is a designed to accommodate those supplier engagements which do not fit one of the primary patterns (Pickup, MAWB, Delivery). The responsible company is permitted to be either an Agent or Carrier. It could represent a responsible company moving product from one supplier to another, or it could involve performing an installation or assembly service at a residence. Unfortunately because of the wide variety of use cases, the XML EDI system probably will not provide sufficient detail on the handling of these manifests at this time.
* `ManifestSpecialSide` - Many manifests involve simply moving product from one business with a dock to another. However, Delivery Manifests especially often involve special services such as "White Glove" treatment (where the supplier brings product inside a residence, often with two people, unpacks the product, and removes the shipping materials). For Delivery Manifests, this should always be on the destination side. For Pickup Manifests, this should always be on the origin side. For MAWBs, it could be the origin or destination. It is not a well-defined concept for Transfer Manifests. If a special side is indicated on a MAWB, that side should not be an `ManifestOriginType` or `ManifestDestinationType` of Terminal; rather, it should be address.
* `ManifestShipType` - This is the textual ID of the special services to be performed on the side specified in `ManifestSpecialSide`. Examples include "WG" for "White Glove" and "TP" for "Threshold Plus".
* `ManifestShipTypeName` - This is the textual name related to the special services ID specified in `ManifestShipType`.
* `ManifestShipTypeBilling` - Not all suppliers have defined rates for all special services. This billing description text is designed to explain the special services in more standardized terms for which the supplier is more likely to have rates.
* `ManifestShipTypeDesc` - This is a more lengthy description of the special services to be performed on the side specified in `ManifestSpecialSide`.
* `ManifestSpecInst` - These are custom instructions from our operations staff to our suppliers.

#### ManifestControlNumbers

* `ManifestID`
* `ManifestTranID`
* `ManifestSecCode`

#### ManifestKeyDates

* `ManifestReadyDateTime`
* `ManifestDeliverDateTime`
* `ManifestScheduleDateTimeStart`
* `ManifestScheduleDateTimeStop`

#### ManifestOrigin

Most of these elements are self-explanatory.

* `ManifestOriginType`
* `ManifestOriginCode`
* `ManifestOriginLocationType`
* `ManifestOriginName`
* `ManifestOriginContact`
* `ManifestOriginAdd1`
* `ManifestOriginAdd2`
* `ManifestOriginCity`
* `ManifestOriginState`
* `ManifestOriginRegion`
* `ManifestOriginZIP`
* `ManifestOriginCountryCode`
* `ManifestOriginPhone`
* `ManifestOriginFax`
* `ManifestOriginHomePhone`
* `ManifestOriginOtherPhone`

#### ManifestDestination

Most of these elements are self-explanatory.

* `ManifestDestType`
* `ManifestDestCode`
* `ManifestDescLocationType`
* `ManifestDestName`
* `ManifestDestContact`
* `ManifestDestAdd1`
* `ManifestDestAdd2`
* `ManifestDestCity`
* `ManifestDestState`
* `ManifestDestRegion`
* `ManifestDestZIP`
* `ManifestDestCountryCode`
* `ManifestDestPhone`
* `ManifestDestFax`
* `ManifestDestHomePhone`
* `ManifestDestOtherPhone`

#### ManifestPieceSummary

* `ManifestPieceCount` - This represents the total number of pieces on the manifest as a whole (across all of our customers' shipments). While seemingly obvious, it isn't always clear what constitutes a piece. Generally, we view it as a separable, labeled box. Several boxes piled on (but not secured to) a pallet are generally considered separate pieces. However, if they are banded to a pallet and surrounded with black shrink wrap, then the pallet itself is considered a single piece. It's less clear for configurations in between. 
* `ManifestWeightActual` - This represents the total actual weight of all pieces on the manifest. It is not the "dimensional weight".

#### Shipments

This element contains one or more `Shipment` elements for each of our customers' shipments on the manifest.

Response Content
----------------

Miscellany
----------

* Vendor and Supplier are used interchangeably in this documentation.